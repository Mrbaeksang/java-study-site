<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸŒ RESTful API ê°œë°œ - ìŠ¤í”„ë§ ë¶€íŠ¸ ì™„ì „ ì •ë³µ</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    .section {
      background: var(--vscode-darker);
      border: 1px solid var(--vscode-highlight);
      border-radius: 8px;
      margin: 2rem auto;
      padding: 2rem;
      max-width: 1000px;
    }
    h1, h2, h3, h4 {
      color: #4ec9b0;
    }
    h2 {
      border-bottom: 2px solid var(--vscode-highlight);
      padding-bottom: 0.5rem;
      margin-top: 2.5rem;
    }
    h3 {
      margin-top: 2rem;
      color: #9cdcfe;
    }
    p, li {
      line-height: 1.7;
      color: var(--vscode-text);
    }
    .code-block {
      background: #2d2d2d;
      padding: 1rem;
      border-radius: 6px;
      font-family: 'Consolas', monospace;
      overflow-x: auto;
      margin: 1rem 0;
    }
    .note {
      border-left: 4px solid var(--vscode-blue);
      padding: 1rem;
      margin: 1rem 0;
      background: rgba(0, 122, 204, 0.1);
    }
    .tip {
      border-left: 4px solid #85e89d;
      padding: 1rem;
      margin: 1rem 0;
      background: rgba(133, 232, 157, 0.1);
    }
    .warning {
      border-left: 4px solid #f97583;
      padding: 1rem;
      margin: 1rem 0;
      background: rgba(249, 117, 131, 0.1);
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸŒ RESTful API ê°œë°œ</h1>
      <p class="intro-text">ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ RESTful APIë¥¼ ê°œë°œí•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤.</p>
    </header>

    <main>
      <div class="section">
        <h2>1. RESTful API ê¸°ë³¸ ê°œë…</h2>
        <p>REST(Representational State Transfer)ëŠ” ì›¹ í‘œì¤€ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ì•„í‚¤í…ì²˜ ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤.</p>
        
        <h3>RESTì˜ ì£¼ìš” ì›ì¹™</h3>
        <ul>
          <li>ìì›(Resource) ê¸°ë°˜</li>
          <li>HTTP ë©”ì„œë“œ(GET, POST, PUT, DELETE ë“±) í™œìš©</li>
          <li>ë¬´ìƒíƒœì„±(Stateless)</li>
          <li>ìºì‹œ ê°€ëŠ¥(Cacheable)</li>
          <li>ì¼ê´€ëœ ì¸í„°í˜ì´ìŠ¤</li>
        </ul>
      </div>
      
      <div class="section">
        <h2>2. REST ì»¨íŠ¸ë¡¤ëŸ¬ êµ¬í˜„</h2>
        <p>ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” <code>@RestController</code> ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ RESTful APIë¥¼ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        
        <div class="code-block">
          <pre><code>@RestController
@RequestMapping("/api/books")
public class BookController {
    
    private final BookService bookService;
    
    public BookController(BookService bookService) {
        this.bookService = bookService;
    }
    
    @GetMapping
    public ResponseEntity&lt;List&lt;Book&gt;&gt; getAllBooks() {
        return ResponseEntity.ok(bookService.findAllBooks());
    }
    
    @GetMapping("/{id}")
    public ResponseEntity&lt;Book&gt; getBookById(@PathVariable Long id) {
        return bookService.findBookById(id)
                .map(ResponseEntity::ok)
                .orElse(ResponseEntity.notFound().build());
    }
    
    @PostMapping
    public ResponseEntity&lt;Book&gt; createBook(@Valid @RequestBody Book book) {
        Book savedBook = bookService.saveBook(book);
        return ResponseEntity.created(
            ServletUriComponentsBuilder.fromCurrentRequest()
                .path("/{id}")
                .buildAndExpand(savedBook.getId())
                .toUri()
        ).body(savedBook);
    }
    
    @PutMapping("/{id}")
    public ResponseEntity&lt;Book&gt; updateBook(@PathVariable Long id, @Valid @RequestBody Book book) {
        return bookService.findBookById(id)
                .map(existingBook -> {
                    book.setId(id);
                    return ResponseEntity.ok(bookService.saveBook(book));
                })
                .orElse(ResponseEntity.notFound().build());
    }
    
    @DeleteMapping("/{id}")
    public ResponseEntity&lt;Void&gt; deleteBook(@PathVariable Long id) {
        return bookService.findBookById(id)
                .map(book -> {
                    bookService.deleteBook(id);
                    return ResponseEntity.noContent().&lt;Void&gt;build();
                })
                .orElse(ResponseEntity.notFound().build());
    }
}</code></pre>
        </div>
      </div>
      
      <div class="section">
        <h2>3. DTO(Data Transfer Object) ì‚¬ìš©</h2>
        <p>ë„ë©”ì¸ ëª¨ë¸ ëŒ€ì‹  DTOë¥¼ ì‚¬ìš©í•˜ì—¬ API ìš”ì²­/ì‘ë‹µì„ ì²˜ë¦¬í•˜ë©´ ë” ì•ˆì „í•˜ê³  ìœ ì—°í•œ APIë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        
        <div class="code-block">
          <pre><code>@Data
@NoArgsConstructor
@AllArgsConstructor
public class BookDto {
    private Long id;
    
    @NotBlank(message = "ì œëª©ì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.")
    private String title;
    
    @NotBlank(message = "ì €ìëŠ” í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.")
    private String author;
    
    @NotNull(message = "ì¶œíŒ ì—°ë„ëŠ” í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.")
    @Min(value = 1000, message = "ì¶œíŒ ì—°ë„ëŠ” 1000ë…„ ì´í›„ì—¬ì•¼ í•©ë‹ˆë‹¤.")
    private Integer publicationYear;
    
    @NotBlank(message = "ISBNì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.")
    @Pattern(regexp = "^[0-9-]+$", message = "ISBNì€ ìˆ«ìì™€ í•˜ì´í”ˆ(-)ë§Œ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.")
    private String isbn;
    
    public static BookDto from(Book book) {
        return new BookDto(
            book.getId(),
            book.getTitle(),
            book.getAuthor(),
            book.getPublicationYear(),
            book.getIsbn()
        );
    }
    
    public Book toEntity() {
        return Book.builder()
                .id(this.id)
                .title(this.title)
                .author(this.author)
                .publicationYear(this.publicationYear)
                .isbn(this.isbn)
                .build();
    }
}</code></pre>
        </div>
      </div>
      
      <div class="section">
        <h2>4. ì˜ˆì™¸ ì²˜ë¦¬</h2>
        <p>ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í†µí•´ ì¼ê´€ëœ ì—ëŸ¬ ì‘ë‹µì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        
        <div class="code-block">
          <pre><code>@ControllerAdvice
public class GlobalExceptionHandler {
    
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity&lt;ErrorResponse&gt; handleValidationExceptions(MethodArgumentNotValidException ex) {
        List&lt;String&gt; errors = ex.getBindingResult()
                .getFieldErrors()
                .stream()
                .map(error -> error.getField() + ": " + error.getDefaultMessage())
                .collect(Collectors.toList());
                
        ErrorResponse response = new ErrorResponse(
            "ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨",
            HttpStatus.BAD_REQUEST.value(),
            errors
        );
        
        return new ResponseEntity&lt;&gt;(response, HttpStatus.BAD_REQUEST);
    }
    
    @ExceptionHandler(ResourceNotFoundException.class)
    public ResponseEntity&lt;ErrorResponse&gt; handleResourceNotFound(ResourceNotFoundException ex) {
        ErrorResponse response = new ErrorResponse(
            ex.getMessage(),
            HttpStatus.NOT_FOUND.value()
        );
        return new ResponseEntity&lt;&gt;(response, HttpStatus.NOT_FOUND);
    }
    
    @ExceptionHandler(Exception.class)
    public ResponseEntity&lt;ErrorResponse&gt; handleAllExceptions(Exception ex) {
        ErrorResponse response = new ErrorResponse(
            "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + ex.getMessage(),
            HttpStatus.INTERNAL_SERVER_ERROR.value()
        );
        return new ResponseEntity&lt;&gt;(response, HttpStatus.INTERNAL_SERVER_ERROR);
    }
}

@Data
@AllArgsConstructor
@NoArgsConstructor
class ErrorResponse {
    private String message;
    private int status;
    private List&lt;String&gt; errors;
    
    public ErrorResponse(String message, int status) {
        this.message = message;
        this.status = status;
        this.errors = new ArrayList&lt;&gt;();
    }
}</code></pre>
        </div>
      </div>
      
      <div class="section">
        <h2>5. API ë¬¸ì„œí™” (SpringDoc OpenAPI)</h2>
        <p>SpringDoc OpenAPIë¥¼ ì‚¬ìš©í•˜ì—¬ API ë¬¸ì„œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        
        <div class="code-block">
          <pre><code>// build.gradleì— ì˜ì¡´ì„± ì¶”ê°€
implementation 'org.springdoc:springdoc-openapi-ui:1.6.8'

// application.yml ì„¤ì •
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    operationsSorter: method
    tagsSorter: alpha
    docExpansion: none

// ì»¨íŠ¸ë¡¤ëŸ¬ ì˜ˆì‹œ
@Tag(name = "ë„ì„œ ê´€ë¦¬", description = "ë„ì„œ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” API")
@RestController
@RequestMapping("/api/books")
public class BookController {
    
    @Operation(summary = "ë„ì„œ ëª©ë¡ ì¡°íšŒ", description = "ëª¨ë“  ë„ì„œ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.")
    @ApiResponses({
        @ApiResponse(responseCode = "200", description = "ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒë˜ì—ˆìŠµë‹ˆë‹¤.")
    })
    @GetMapping
    public ResponseEntity&lt;List&lt;BookDto&gt;&gt; getAllBooks() {
        // êµ¬í˜„ ë‚´ìš©
    }
    
    @Operation(summary = "ë„ì„œ ìƒì„¸ ì¡°íšŒ", description = "IDë¡œ ë„ì„œ ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.")
    @ApiResponses({
        @ApiResponse(responseCode = "200", description = "ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒë˜ì—ˆìŠµë‹ˆë‹¤."),
        @ApiResponse(responseCode = "404", description = "í•´ë‹¹ IDì˜ ë„ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
    })
    @GetMapping("/{id}")
    public ResponseEntity&lt;BookDto&gt; getBookById(
            @Parameter(description = "ë„ì„œ ID", required = true, example = "1") 
            @PathVariable Long id) {
        // êµ¬í˜„ ë‚´ìš©
    }
}</code></pre>
        </div>
        
        <div class="tip">
          ğŸ’¡ <strong>íŒ</strong>: ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ í›„ <code>http://localhost:8080/swagger-ui.html</code>ì—ì„œ API ë¬¸ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </div>
      </div>
    </main>
    
    <footer>
      <p>Â© 2025 ìŠ¤í”„ë§ ë¶€íŠ¸ ì™„ì „ ì •ë³µ. ëª¨ë“  ê¶Œë¦¬ ë³´ìœ .</p>
    </footer>
  </div>
</body>
</html>
