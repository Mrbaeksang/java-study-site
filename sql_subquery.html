<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ“š SQL U09 â€“ ì„œë¸Œì¿¼ë¦¬(Subquery), IN, EXISTS</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    .section {
      background: var(--vscode-darker);
      border: 1px solid var(--vscode-highlight);
      border-radius: 8px;
      margin: 2rem auto;
      padding: 2rem;
      max-width: 1000px;
    }
    .method-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }
    .method-table {
      width: 100%;
      border-collapse: collapse;
      margin: 1rem 0;
    }
    .method-table th,
    .method-table td {
      padding: 0.75rem;
      border: 1px solid var(--vscode-highlight);
      text-align: left;
    }
    .method-table th {
      background: var(--vscode-bg);
    }
    .example-box {
      background: var(--vscode-bg);
      border-radius: 6px;
      padding: 1.5rem;
      margin: 1rem 0;
    }
    .code-block {
      background: #2d2d2d;
      padding: 1rem;
      border-radius: 6px;
      font-family: 'Consolas', monospace;
      overflow-x: auto;
      margin: 1rem 0;
      line-height: 1.5;
    }
    .note {
      border-left: 4px solid var(--vscode-blue);
      padding: 1rem;
      margin: 1rem 0;
      background: rgba(0, 122, 204, 0.1);
    }
    .warning {
      border-left: 4px solid #f97583;
      padding: 1rem;
      margin: 1rem 0;
      background: rgba(249, 117, 131, 0.1);
    }
    .tip {
      border-left: 4px solid #85e89d;
      padding: 1rem;
      margin: 1rem 0;
      background: rgba(133, 232, 157, 0.1);
    }
    .tag {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.8rem;
      margin-right: 0.5rem;
      background: var(--vscode-highlight);
    }
    h2 {
      color: var(--vscode-blue);
      border-bottom: 1px solid var(--vscode-highlight);
      padding-bottom: 0.5rem;
      margin: 2rem 0 1rem;
    }
    h3 {
      color: var(--vscode-text);
      margin: 1.5rem 0 1rem;
    }
    .sql-keyword {
      color: #569cd6;
      font-weight: bold;
    }
    .sql-string {
      color: #ce9178;
    }
    .sql-number {
      color: #b5cea8;
    }
    .sql-comment {
      color: #6a9955;
      font-style: italic;
    }
    .sql-operator {
      color: #d4d4d4;
      font-weight: bold;
    }
    .practice {
      background: rgba(0, 0, 0, 0.2);
      border-left: 4px solid #ffd700;
      padding: 1rem;
      margin: 1.5rem 0;
      border-radius: 0 4px 4px 0;
    }
    .practice-title {
      color: #ffd700;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>ğŸ“š SQL U09 â€“ ì„œë¸Œì¿¼ë¦¬(Subquery), IN, EXISTS</h1>
  </header>

  <div class="section">
    <h2>1. â“ ë“±ì¥ ë°°ê²½ â€“ ì™œ í•„ìš”í•œê°€?</h2>
    <p>"ì¡°ê±´ì„ ì¤˜ì•¼ í•˜ëŠ”ë°, <strong>ê·¸ ì¡°ê±´ê°’ì´ ë™ì ìœ¼ë¡œ ì •í•´ì ¸ì•¼ í•´.</strong>"</p>
    <p>ì˜ˆë¥¼ ë“¤ì–´:</p>
    <ul>
      <li>"ê°€ì¥ ë¹„ì‹¼ ìƒí’ˆì„ ì£¼ë¬¸í•œ ì‚¬ìš©ìë“¤ë§Œ ë³´ê³  ì‹¶ì–´"</li>
      <li>"ìƒí’ˆì„ 2ê°œ ì´ìƒ ì£¼ë¬¸í•œ ì‚¬ìš©ìë§Œ ì¡°íšŒí•˜ê³  ì‹¶ì–´"</li>
    </ul>
    <p>ğŸ‘‰ ì´ëŸ´ ë• ì„œë¸Œì¿¼ë¦¬ê°€ í•„ìš”í•´ìš”.<br>ì„œë¸Œì¿¼ë¦¬ëŠ” ì¿¼ë¦¬ ë‚´ë¶€ì—ì„œ ë˜ ë‹¤ë¥¸ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•œ ê²°ê³¼ë¥¼ ì¡°ê±´ìœ¼ë¡œ ì‚¼ëŠ” ë°©ì‹ì´ì—ìš”.</p>
  </div>

  <div class="section">
    <h2>2. ğŸš« ê¸°ì¡´ ë°©ì‹ì˜ í•œê³„</h2>
    <table class="method-table">
      <tr>
        <th>ë°©ì‹</th>
        <th>í•œê³„</th>
      </tr>
      <tr>
        <td>ì •ì ì¸ ê°’ë§Œ ì¡°ê±´ìœ¼ë¡œ ê°€ëŠ¥</td>
        <td><code class="sql-keyword">WHERE</code> price = 1000000 â† ê³ ì •ëœ ìˆ«ìë§Œ</td>
      </tr>
      <tr>
        <td>ë‹¤ë‹¨ê³„ ê´€ê³„ í‘œí˜„ ì–´ë ¤ì›€</td>
        <td>íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” í–‰ì„ ì°¾ì•„ì„œ ë˜ ë‹¤ë¥¸ í…Œì´ë¸”ì—ì„œ ì—°ê²°í•˜ëŠ” ì‹ì´ ì–´ë ¤ì›€</td>
      </tr>
    </table>
  </div>

  <div class="section">
    <h2>3. ğŸ§  í•µì‹¬ ê°œë… ìš”ì•½</h2>
    <table class="method-table">
      <tr>
        <th>ë¬¸ë²•</th>
        <th>ì„¤ëª…</th>
      </tr>
      <tr>
        <td><code class="sql-keyword">(SELECT</code> ...<code class="sql-keyword">)</code></td>
        <td>ì„œë¸Œì¿¼ë¦¬ ê¸°ë³¸í˜•</td>
      </tr>
      <tr>
        <td><code class="sql-keyword">IN (</code>ì„œë¸Œì¿¼ë¦¬<code class="sql-keyword">)</code></td>
        <td>ê²°ê³¼ ëª©ë¡ ì¤‘ í¬í•¨ë˜ëŠ” ê°’ì´ë©´ ì°¸</td>
      </tr>
      <tr>
        <td><code class="sql-keyword">EXISTS (</code>ì„œë¸Œì¿¼ë¦¬<code class="sql-keyword">)</code></td>
        <td>ê²°ê³¼ê°€ ì¡´ì¬í•˜ë©´ ì°¸</td>
      </tr>
      <tr>
        <td><code class="sql-operator">= (</code>ì„œë¸Œì¿¼ë¦¬<code class="sql-operator">)</code></td>
        <td>ì„œë¸Œì¿¼ë¦¬ ê²°ê³¼ê°€ ë‹¨ì¼ê°’ì¼ ë•Œ</td>
      </tr>
    </table>
  </div>

  <div class="section">
    <h2>4. âš™ï¸ ì‹¤í–‰ íë¦„ ë„ì‹í™”</h2>
    <div class="code-block">
      <span class="sql-keyword">SELECT</span> name<br>
      <span class="sql-keyword">FROM</span> users<br>
      <span class="sql-keyword">WHERE</span> id <span class="sql-keyword">IN</span> (<br>
      &nbsp;&nbsp;<span class="sql-keyword">SELECT</span> user_id<br>
      &nbsp;&nbsp;<span class="sql-keyword">FROM</span> orders<br>
      &nbsp;&nbsp;<span class="sql-keyword">WHERE</span> product_id = <span class="sql-number">500</span><br>
      );
    </div>
    <ol>
      <li>1ï¸âƒ£ ë‚´ë¶€ ì¿¼ë¦¬ ì‹¤í–‰ â†’ ordersì—ì„œ product_id = 500ì¸ user_idë§Œ ì¶”ì¶œ</li>
      <li>2ï¸âƒ£ ê·¸ ê²°ê³¼ì— usersì˜ idê°€ í¬í•¨ë˜ë©´ ì¶œë ¥</li>
    </ol>
  </div>

  <div class="section">
    <h2>5. ğŸ  ì‹¤ìƒí™œ ë¹„ìœ </h2>
    <p>ğŸ“‚ "ì´ ëª©ë¡ì— ìˆëŠ” ì‚¬ëŒë§Œ ë”°ë¡œ ì„œë¥˜ ë½‘ê¸°"</p>
    <p>ë‚´ë¶€ì—ì„œ ë¨¼ì € ì¡°ê±´ì— ë§ëŠ” ëª©ë¡ì„ ë§Œë“¦ â†’ ê·¸ ê²°ê³¼ë¡œ ë©”ì¸ í•„í„°ë§</p>
    <p>ì˜ˆ: "ìµœê³ ì  ë°›ì€ í•™ìƒì˜ ì´ë¦„ì„ ë³´ê³  ì‹¶ë‹¤" â†’ ì ìˆ˜ í…Œì´ë¸” ë¨¼ì € ì¡°íšŒ â†’ ê·¸ ì‚¬ëŒë§Œ ì´ë¦„í‘œ ì¶”ì¶œ</p>
  </div>

  <div class="section">
    <h2>6. ğŸ§ª ì˜ˆì œ</h2>
    
    <div class="example-box">
      <h3>âœ… ì˜ˆì œ 1: ë§¥ë¶(500ë²ˆ) ìƒí’ˆì„ ì£¼ë¬¸í•œ ì‚¬ìš©ìë§Œ ì¡°íšŒ</h3>
      <div class="code-block">
        <span class="sql-keyword">SELECT</span> name<br>
        <span class="sql-keyword">FROM</span> users<br>
        <span class="sql-keyword">WHERE</span> id <span class="sql-keyword">IN</span> (<br>
        &nbsp;&nbsp;<span class="sql-keyword">SELECT</span> user_id<br>
        &nbsp;&nbsp;<span class="sql-keyword">FROM</span> orders<br>
        &nbsp;&nbsp;<span class="sql-keyword">WHERE</span> product_id = <span class="sql-number">500</span><br>
        );
      </div>
    </div>

    <div class="example-box">
      <h3>âœ… ì˜ˆì œ 2: ê°€ì¥ ë¹„ì‹¼ ìƒí’ˆ ì¡°íšŒ</h3>
      <div class="code-block">
        <span class="sql-keyword">SELECT</span> *<br>
        <span class="sql-keyword">FROM</span> products<br>
        <span class="sql-keyword">WHERE</span> price = (<br>
        &nbsp;&nbsp;<span class="sql-keyword">SELECT</span> <span class="sql-keyword">MAX</span>(price)<br>
        &nbsp;&nbsp;<span class="sql-keyword">FROM</span> products<br>
        );
      </div>
      <p class="tip">= ì—°ì‚°ìëŠ” ì„œë¸Œì¿¼ë¦¬ ê²°ê³¼ê°€ 1ê°œì¼ ë•Œë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
    </div>

    <div class="example-box">
      <h3>âœ… ì˜ˆì œ 3: ì£¼ë¬¸í•œ ì  ìˆëŠ” ì‚¬ìš©ìë§Œ ì¡°íšŒ (EXISTS)</h3>
      <div class="code-block">
        <span class="sql-keyword">SELECT</span> *<br>
        <span class="sql-keyword">FROM</span> users u<br>
        <span class="sql-keyword">WHERE</span> <span class="sql-keyword">EXISTS</span> (<br>
        &nbsp;&nbsp;<span class="sql-keyword">SELECT</span> <span class="sql-number">1</span><br>
        &nbsp;&nbsp;<span class="sql-keyword">FROM</span> orders o<br>
        &nbsp;&nbsp;<span class="sql-keyword">WHERE</span> o.user_id = u.id<br>
        );
      </div>
      <p class="tip">EXISTSëŠ” ì¡´ì¬ ì—¬ë¶€ë§Œ íŒë‹¨í•˜ë¯€ë¡œ SELECT ì ˆì— 1ì´ë‚˜ * ë“± ì•„ë¬´ ê°’ì´ë‚˜ ë„£ì–´ë„ ë©ë‹ˆë‹¤. ì„±ëŠ¥ìƒìœ¼ë¡œë„ íš¨ìœ¨ì ì…ë‹ˆë‹¤.</p>
    </div>
  </div>

  <div class="section">
    <h2>7. ğŸ› ï¸ TODO ì‹¤ìŠµ</h2>
    
    <div class="practice">
      <div class="practice-title">ğŸ§ª ì‹¤ìŠµ 1</div>
      <p>ë§¥ë¶(500)ì„ ì£¼ë¬¸í•œ ì‚¬ìš©ì ì´ë¦„ì„ ì„œë¸Œì¿¼ë¦¬ë¡œ ì¡°íšŒí•˜ë¼</p>
      <div class="code-block">
        <span class="sql-comment">-- TODO 1</span><br>
        <span class="sql-keyword">SELECT</span> name<br>
        <span class="sql-keyword">FROM</span> users<br>
        <span class="sql-keyword">WHERE</span> id <span class="sql-keyword">IN</span> (<nobr><span class="sql-comment">/* ì—¬ê¸°ì— ì‘ì„± */</span></nobr>);
      </div>
    </div>

    <div class="practice">
      <div class="practice-title">ğŸ§ª ì‹¤ìŠµ 2</div>
      <p>ê°€ì¥ ë¹„ì‹¼ ìƒí’ˆ ì´ë¦„ê³¼ ê°€ê²©ì„ ì¡°íšŒí•˜ë¼</p>
      <div class="code-block">
        <span class="sql-comment">-- TODO 2</span><br>
        <span class="sql-keyword">SELECT</span> name, price<br>
        <span class="sql-keyword">FROM</span> products<br>
        <span class="sql-keyword">WHERE</span> price = (<nobr><span class="sql-comment">/* ì—¬ê¸°ì— ì‘ì„± */</span></nobr>);
      </div>
    </div>

    <div class="practice">
      <div class="practice-title">ğŸ§ª ì‹¤ìŠµ 3</div>
      <p>ìµœì†Œ 1ê°œë¼ë„ ì£¼ë¬¸í•œ ì‚¬ìš©ìë¥¼ EXISTSë¡œ ì¡°íšŒí•˜ë¼</p>
      <div class="code-block">
        <span class="sql-comment">-- TODO 3</span><br>
        <span class="sql-keyword">SELECT</span> *<br>
        <span class="sql-keyword">FROM</span> users u<br>
        <span class="sql-keyword">WHERE</span> <nobr><span class="sql-comment">/* ì—¬ê¸°ì— ì‘ì„± */</span></nobr>;
      </div>
    </div>
  </div>

  <div class="section">
    <h2>8. ğŸ“ ì •ë‹µ</h2>
    <details>
      <summary>ì‹¤ìŠµ 1 ì •ë‹µ ë³´ê¸°</summary>
      <div class="code-block">
        <span class="sql-keyword">SELECT</span> name<br>
        <span class="sql-keyword">FROM</span> users<br>
        <span class="sql-keyword">WHERE</span> id <span class="sql-keyword">IN</span> (<br>
        &nbsp;&nbsp;<span class="sql-keyword">SELECT</span> user_id<br>
        &nbsp;&nbsp;<span class="sql-keyword">FROM</span> orders<br>
        &nbsp;&nbsp;<span class="sql-keyword">WHERE</span> product_id = <span class="sql-number">500</span><br>
        );
      </div>
    </details>

    <details>
      <summary>ì‹¤ìŠµ 2 ì •ë‹µ ë³´ê¸°</summary>
      <div class="code-block">
        <span class="sql-keyword">SELECT</span> name, price<br>
        <span class="sql-keyword">FROM</span> products<br>
        <span class="sql-keyword">WHERE</span> price = (<br>
        &nbsp;&nbsp;<span class="sql-keyword">SELECT</span> <span class="sql-keyword">MAX</span>(price)<br>
        &nbsp;&nbsp;<span class="sql-keyword">FROM</span> products<br>
        );
      </div>
    </details>

    <details>
      <summary>ì‹¤ìŠµ 3 ì •ë‹µ ë³´ê¸°</summary>
      <div class="code-block">
        <span class="sql-keyword">SELECT</span> *<br>
        <span class="sql-keyword">FROM</span> users u<br>
        <span class="sql-keyword">WHERE</span> <span class="sql-keyword">EXISTS</span> (<br>
        &nbsp;&nbsp;<span class="sql-keyword">SELECT</span> <span class="sql-number">1</span><br>
        &nbsp;&nbsp;<span class="sql-keyword">FROM</span> orders o<br>
        &nbsp;&nbsp;<span class="sql-keyword">WHERE</span> o.user_id = u.id<br>
        );
      </div>
    </details>
  </div>

  <script>
    // ì½”ë“œ ë¸”ë¡ì— êµ¬ë¬¸ ê°•ì¡° ì ìš©
    document.addEventListener('DOMContentLoaded', function() {
      const codeBlocks = document.querySelectorAll('.code-block');
      codeBlocks.forEach(block => {
        let html = block.innerHTML;
        // SQL í‚¤ì›Œë“œ ê°•ì¡°
        const keywords = ['SELECT', 'FROM', 'WHERE', 'IN', 'EXISTS', 'AND', 'OR', 'NOT', 'AS', 'GROUP BY', 'ORDER BY', 'HAVING', 'LIMIT', 'OFFSET', 'JOIN', 'INNER', 'LEFT', 'RIGHT', 'FULL', 'OUTER', 'ON', 'UNION', 'ALL', 'INSERT', 'INTO', 'VALUES', 'UPDATE', 'SET', 'DELETE', 'CREATE', 'TABLE', 'ALTER', 'DROP', 'PRIMARY', 'KEY', 'FOREIGN', 'REFERENCES', 'UNIQUE', 'INDEX', 'VIEW', 'PROCEDURE', 'FUNCTION', 'TRIGGER', 'BEGIN', 'END', 'IF', 'THEN', 'ELSE', 'WHILE', 'FOR', 'FOREACH', 'CASE', 'WHEN', 'ELSE', 'THEN', 'END', 'LOOP', 'EXIT', 'CONTINUE', 'RETURN', 'DECLARE', 'DEFAULT', 'NOT NULL', 'NULL', 'TRUE', 'FALSE', 'IS', 'BETWEEN', 'LIKE', 'IN', 'ANY', 'SOME', 'ALL', 'EXISTS', 'UNIQUE', 'DISTINCT', 'ASC', 'DESC', 'BY', 'HAVING', 'WITH', 'RECURSIVE', 'WINDOW', 'PARTITION', 'OVER', 'FILTER', 'INTERSECT', 'EXCEPT', 'CROSS', 'NATURAL', 'USING', 'LATERAL'];
        
        keywords.forEach(keyword => {
          const regex = new RegExp(`\\b(${keyword})\\b`, 'gi');
          html = html.replace(regex, '<span class="sql-keyword">$1</span>');
        });

        // ìˆ«ì ê°•ì¡°
        html = html.replace(/(\b\d+\b)/g, '<span class="sql-number">$1</span>');
        
        // ë¬¸ìì—´ ê°•ì¡°
        html = html.replace(/'([^']*?)'/g, '<span class="sql-string">\'$1\'</span>');
        
        // ì£¼ì„ ê°•ì¡°
        html = html.replace(/--(.*?)(?=<br>|$)/g, '<span class="sql-comment">--$1</span>');
        
        block.innerHTML = html;
      });
    });
  </script>
</body>
</html>
